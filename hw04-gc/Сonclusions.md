# Критерий выбора 
### Критерием выбора является Общее время расчета.<br>
В данном примере предпологается, что приложению необходимо максимально быстро сделать большое количество 
математических расчетов и gc, который меньше всех будет мешать этому делу и будет являться наилучшим

|                         | G1(256mb) | Serial Collector(256mb) | Parallel Collector(256mb) | G1(8gb)  | G1(8gb)(MaxGCPauseMillis=10) | Serial Collector(8gb) | Parallel Collector(8gb) |
|-------------------------|-----------|-------------------------|---------------------------|----------|------------------------------|-----------------------|-------------------------|
| Общее время расчёта     | 53,035    | 50,673                  | 55,595                    | 66,379   | 51.16                        | 48,992                | 50,884                  |
| Количество вызовов GC   | 522       | 866                     | 715                       | 37       | 154                          | 26                    | 24                      |
| Общее время работы GC   | 3,4140    | 5,3870                  | 8,2060                    | 7,1460   | 3,031                        | 2,8860                | 3,1530                  |
| Среднее время работы GC | 0,006540  | 0,006221                | 0,011477                  | 0,193135 | 0,019682                     | 0,111000              | 0,131375                |

При ограничении размера heap-а в 256mb лучшим выбором является Serial Collector, поскольку, даже несмотря на то что он
вызывал stopTheWorld(stw) гораздо чаще чем его конкуренты, и его суммарное время работы больше чем у G1, за счет того, что
каждая остановка длилась меньше всех остальных GC - это позволило приложению сделать все свои расчеты быстрее.

G1 показал хорошие результаты. Т.к. он вызывал stw гораздо реже, его общее время работы наименьшее, но, по
показателю среднего времени работы он был совсем немного хуже, но в итоге это вылилось в разницу практически в 3 секунды.
Воспользоваться оптимизацией MaxGCPauseMillis здесь не удалось, т.к. из-за малого количества хипа данный параметр не возымел эффекта.

Parallel Collector показал наихудший результат, чаще чем G1 и дольше чем оба вызывал stw, что в итоге вылилось в наибольшее 
время расчета.

Увеличение хипа до 8gb плохо сказалось на результатах G1. Хоть вызывов stw и стало значительней меньше, их средняя длительность
очень сильно увиличилась, что, в свою очередь увеличило общую длительность расчетов по сравнению даже с самим собой, но с меньшим объёмом памяти. 
Проблема очевидна: больше комната - больше убираться. Пробуем покрутить MaxGCPauseMillis и получаем выйгрыш на 2 секунды 
по сравнению с самим собой(256mb), наилучшие результаты получались при указании 10mls.

Serial Collector оказался и в этот раз молодцом, увеличение памяти ему помогло. Не худшее среднее время работы и не чаще всех вызывал stw, что позволило ему
вновь получить первенство. Хотя конечно кое-что мне не очень понятно. У Serial Collector stw хоть и вызывался значительно реже по сравнению с G1, 
но показатель среднего времени работы намного больше. Такая же, но противоположная ситуация была на хипе размером 256mb, 
и по сути, среднее время работы позволило выйграть Serial collector-у за счет этого, тем не менее, 
в ситуации с 8gb G1 все равно проигрывает, несмотря на более быструю среднюю скорость.

На Parallel Collector больше всех повлияло увеличение объёма памяти, он улучшил свой собственный результат практически на 5 секунд.
Хоть его остановки и являются самыми длительными, судя по всему это компенсировалось наименьшим количеством вызывов и он занял 2-ое место.

## Выводы

Очевидным выбором на объёме памяти до 8gb является Serial Collector, т.к. он показал себя лучше всех и на маленьком объёме памяти,
и на максимально доступном(8gb). Но должен отметить, что реакция на увеличение памяти больше всего была на Parallel Collector, и,
возможно, при достаточном увеличении объёма памяти, настанет такой момент, что Parallel Collector будет эффективнее.
Тоже самое стоит сказать и про G1, на примерах в 8gb видно, что его средняя скорость гораздом меньше, чем у Serial Collector,
и, судя по всему, только то что Serial Collector очень редко вызывал stw позволило ему выйграть. Увеличение объёма
позволило бы G1 сократить количество вызывов stw и победить за счет более быстрой средней скорости, и возможно, этого бы и хватило. Но конечно, стоит учитывать
что тоже самое верно и для Serial Collector - при увеличении объёма памяти он бы тоже сократил количество вызовов stw, и для кого это было бы эффективнее, можно узнать только
путем проб и эксперементов. Ну а окончательный вывод - до 8gb для данного примера лучшим GC является Serial Collector.
